<div id="popup-advanced-search" class="">
  <div (click)="close()" class="close-section">
    <div class="">
      <button (click)="clearSearch()"><span class="button-text">vider</span></button>
    </div>
  </div>

  <div class="">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" id="advanced-search-form">
      <div id="search-left">
        <div class="form-group searchbar-container">
          <label for="masque">Recherche par espèce, genre, famille, mot clé, etc...</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="masque" formControlName="masque">
          </div>

        </div>
        <div class="form-group">
          <label for="referentiel">Référentiel taxonomique</label>
          <select id="referentiel" formControlName="referentiel" class="w-100">
            @for(referentiel of referentiels; ; track referentiel.code){
            <option [value]="referentiel.code">
            {{ referentiel.nom }}
            </option>
            }
          </select>
        </div>
        <div class="form-group">
          <label for="famille">Famille (latin)</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="famille" formControlName="famille">
          </div>
        </div>
        <div class="form-group">
          <label for="genre">Genre</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="genre" formControlName="genre">
          </div>
        </div>
        <div class="form-group">
          <label for="ns">Espèce</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="ns" formControlName="ns">
          </div>
        </div>
        <div *ngIf="!useYearOnly" class="form-group">
          <label for="date">Date</label>
          <input id="date" formControlName="date" type="date">
        </div>
        <div *ngIf="useYearOnly" class="form-group">
          <label for="year">Année</label>
          <input id="year" formControlName="year" type="number">
        </div>
        <div class="form-group-checkbox">
          <input id="useYearOnly" type="checkbox" (change)="toggleUseYearOnly()" [checked]="useYearOnly">
          <label for="useYearOnly">Rechercher seulement par année</label>
        </div>
      </div>
      <div id="search-right">
        <div class="form-group">
          <label for="pays">Pays</label>
          <select id="pays" formControlName="pays" class="w-100">
            <option [value]=""></option>
            @for(pays of paysList; track pays.code_iso_3166_1){
            <option [value]="pays.code_iso_3166_1">
            {{ pays.nom_fr }}
            </option>
            }
          </select>
        </div>
        <div class="form-group">
          <label for="departement">Département français (numéro ou nom)</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="departement" formControlName="departement">
          </div>
        </div>
        <div class="form-group">
          <label for="commune">Commune française</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="commune" formControlName="commune">
          </div>
        </div>
        <div class="form-group">
          <label for="auteur">Publié par</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="auteur" formControlName="auteur">
          </div>
        </div>
        <div class="form-group">
          <label for="tag">Tags</label>
          <div class="searchbar-container">
            <img class="search-icon" title="recherchez" src="assets/icons/search.png">
            <input id="tag" formControlName="tag">
          </div>
        </div>
        <div class="form-group-checkbox">
          <input id="pninscritsseulement" type="checkbox" formControlName="pninscritsseulement" checked>
          <label for="pninscritsseulement">Masquer les observations anonymes envoyées via smartphone</label>
        </div>
        <button type="submit"><span class="button-text">Rechercher</span></button>
      </div>
    </form>
  </div>
</div>
